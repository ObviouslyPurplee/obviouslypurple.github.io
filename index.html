<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>obviouslypurple — portfolio</title>
  <meta name="description" content="obviouslypurple — roblox developer • ui + 3d artist • project manager" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#ffffff;
      --ink:#1f1f24;
      --muted:#5f5f6b;
      --pink:#ffd8ea;
      --pink-200:#ffe6f1;
      --accent:#ff9bc8;
      --green:#b6f2c1;
      --card:#ffffff;
      --radius:10px;
      --shadow:0 8px 26px rgba(31,31,36,.08);
      --max:1000px;
    }
    :root[data-theme="dark"]{
      --bg:#1a1a1a;
      --ink:#ffffff;
      --muted:#cccccc;
      --card:#2a2a2a;
      --shadow:0 8px 26px rgba(0,0,0,.6);
      --accent:#ff9bc8;
      --green:#3bb273;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Space Mono', monospace; color:var(--ink);
      background:var(--bg);
      text-transform:lowercase;
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:20px 16px 64px; position:relative; z-index:1}

    header{display:grid; grid-template-columns:1fr auto 1fr; align-items:center; padding:12px 0; border-bottom:1px solid #f2e6ee;}
    :root[data-theme="dark"] header{border-bottom:1px solid var(--pink);}

    .left-nav{display:flex; gap:18px; align-items:center}
    .left-nav a{position:relative; padding:6px 2px; color:var(--ink)}
    .left-nav a::after{content:""; position:absolute; left:0; right:0; bottom:0; height:2px; background:var(--accent); transform:scaleX(0); transform-origin:left; transition:transform .2s ease, background .2s ease}
    .left-nav a:hover::after{transform:scaleX(1)}
    .left-nav a:hover{color:var(--accent)}

    .brand{display:flex; justify-content:center}
    .brand img{height:50px; filter:var(--logo-filter, none);}
  .brand[role=button]{cursor:pointer}

    .right-socials{display:flex; justify-content:flex-end; gap:14px; align-items:center}
    .icon{width:28px; height:28px; display:inline-grid; place-items:center; border-radius:8px; color:var(--ink); background:transparent; border:none}
    .icon:hover{color:var(--accent)}
    .icon svg, .icon img{width:100%; height:100%; display:block; fill:currentColor}

    .hero{margin:60px 0; text-align:center}
    .intro h2{margin:0 0 12px; font-size:18px; line-height:1.6}
    .intro p{margin:0 0 18px; color:var(--muted); font-size:13px}
    .btn{font-size:12px; padding:8px 10px; border:1px solid var(--ink); background:transparent; cursor:pointer; color:var(--ink)}
    .btn:hover{background:var(--pink); border-color:var(--pink); color:var(--ink)}

    /* project tabs + grid */
    .tabs{display:flex; gap:10px; justify-content:center; margin-bottom:20px}
    .tab{appearance:none; border:1px solid #f0d9e6; background:#fff; color:#6c6068; padding:6px 10px; border-radius:999px; font-size:11px; cursor:pointer}
    .tab:hover{background:var(--pink-200); color:#2a2a30; border-color:var(--pink)}
    .tab.is-active{background:var(--ink); color:#fff; border-color:var(--ink)}
    :root[data-theme="dark"] .tab{background:#2a2a2a; border:1px solid var(--pink); color:var(--muted)}
    :root[data-theme="dark"] .tab.is-active{background:var(--accent); color:#fff;}

    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:18px; margin-top:20px}
    .card{background:var(--card); border:1px solid var(--pink); border-radius:var(--radius); padding:12px; box-shadow:var(--shadow); color:var(--ink)}
    .shot{position:relative; aspect-ratio:16/10; border-radius:8px; background:#faf6f9; display:grid; place-items:center; color:#9c8f96; border:1px dashed var(--border); overflow:hidden}
    :root[data-theme="dark"] .shot{background:#1a1a1a; border:1px dashed var(--pink); color:var(--muted)}
    .meta{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:8px; color:var(--muted); font-size:10px}

    footer{margin-top:60px; padding:20px; border-top:1px solid #f2e6ee; text-align:center}
    :root[data-theme="dark"] footer{border-top:1px solid var(--pink)}
    .footer-socials{display:flex; justify-content:center; gap:18px; margin-top:10px}
    .footer-socials .icon svg{width:22px; height:22px; fill:currentColor}
    .footer-socials .icon:hover svg{fill:var(--accent)}
    /* keep pixel clouds behind content so the page doesn't shift */
  #pixelClouds{position:fixed; inset:0; z-index:0; width:100vw; height:100vh; display:block; background:transparent; image-rendering:pixelated; pointer-events:none}
#shimmerFX{position:fixed; inset:0; z-index:0; width:100vw; height:100vh; display:block; background:transparent; image-rendering:pixelated; pointer-events:none; opacity:0; transition:opacity .35s ease}
:root.shimmer-on #shimmerFX{opacity:.35}
:root.shimmer-on{ --accent:#b79bff; }
:root.galaxy-on #shimmerFX{opacity:.5}
:root.galaxy-on{ --accent:#b79bff; }
  :root[data-theme="dark"] .tab{background:transparent; color:#e9e6ea; border:1px solid rgba(255,155,200,.35); transition:all .2s ease}
  :root[data-theme="dark"] .tab:hover{background:rgba(255,155,200,.25); color:#fff; border-color:var(--accent)}
  :root[data-theme="dark"] .tab.is-active{background:var(--accent); color:#1a1216; border-color:var(--accent)}
  /* image thumbnails + hover label + gradient */
  .shot.has-img{background-size:cover; background-position:center; border:none; color:transparent}
  .shot.has-img::after{content:""; position:absolute; inset:0; background:linear-gradient(to bottom, rgba(255,216,234,.35), rgba(255,216,234,0)); opacity:0; transition:opacity .25s ease; pointer-events:none; z-index:1}
  .card:hover .shot.has-img::after{opacity:1}
  .labels{position:absolute; top:10px; left:10px; right:10px; display:flex; justify-content:space-between; gap:8px; z-index:5;}
  .see-more{padding:6px 12px; font-size:12px; line-height:1; border-radius:14px; box-shadow:0 6px 18px rgba(31,31,36,.08); opacity:0; transform:translateY(-6px); transition:opacity .18s ease, transform .18s ease; pointer-events:none; text-decoration:none; cursor:pointer;}
  .card:hover .see-more{opacity:1; transform:translateY(0); pointer-events:auto;}
  /* mobile: show when card is tapped */
  .shot.labels-active .see-more{opacity:1; transform:translateY(0); pointer-events:auto;}
  .see-more.pink{background:var(--pink-200); color:var(--ink);}
  .see-more.green{background:var(--green); color:#000;}
  /* dark mode tweak */
  :root[data-theme="dark"] .shot.has-img::after{background:linear-gradient(to bottom, rgba(255,155,200,.18), rgba(255,155,200,.04))}
  :root[data-theme="dark"] .see-more.pink{background:rgba(255,155,200,.25); color:#fff}
  :root[data-theme="dark"] .see-more.green{background:var(--green); color:#000}
  /* fix: prevent theme switch from changing thumbnail scale */
  .shot.has-img{background-size:cover !important; background-position:center center !important}
  :root[data-theme="dark"] .shot.has-img{background-size:cover !important}

  /* make logo turn white in dark mode without changing size */
  :root[data-theme="dark"]{ --logo-filter: brightness(0) invert(1); }
  .brand img{ transform:none }
  .brand:hover img{ transform:translateY(-2px) scale(1.02) }
  /* fix roblox icon in dark mode */
  .icon.roblox svg{fill:#111}
  :root[data-theme="dark"] .icon.roblox svg{fill:#f6f6f8}
  :root[data-theme="dark"] .icon.roblox svg path.hole{fill:#1a1a1e}
  /* --- responsive header so it doesn't collide on mobile --- */
  @media (max-width: 640px){
    header{grid-template-columns:1fr; row-gap:8px; padding:10px 0}
    .brand{order:1}
    .brand img{height:46px}
    .left-nav{order:2; justify-content:center; gap:14px}
    .right-socials{order:3; justify-content:center; gap:10px}
    .tabs{flex-wrap:wrap; gap:8px}
    .tab{padding:6px 10px; font-size:11px}
    .wrap{padding:16px 12px 56px}
  }
.footer-link{color:var(--muted); text-decoration:underline; text-underline-offset:2px}
.footer-link:hover{color:var(--ink)}
/* changelog modal styles */
.cl-modal{position:fixed; inset:0; display:none; z-index:50}
.cl-modal[aria-hidden="false"]{display:block}
.cl-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35)}
.cl-panel{position:relative; margin:6vh auto; max-width:720px; background:var(--card); color:var(--ink); border:1px solid var(--pink); border-radius:16px; box-shadow:var(--shadow); overflow:hidden}
.cl-header{display:flex; justify-content:space-between; align-items:center; padding:14px 16px; border-bottom:1px solid #f2e6ee}
:root[data-theme="dark"] .cl-header{border-bottom:1px solid var(--pink)}
.cl-close{background:transparent; border:none; font-size:18px; cursor:pointer; color:var(--muted)}
.cl-content{max-height:60vh; overflow:auto; padding:8px 16px 16px}
.cl-list{list-style:none; padding:0; margin:0; display:grid; gap:12px}
.cl-item{border:1px solid var(--pink); border-radius:12px; padding:10px 12px; background:var(--bg)}
.cl-item time{font-size:11px; color:var(--muted)}
.cl-item h4{margin:6px 0 4px; font-size:14px}
.cl-item ul{margin:0; padding-left:18px}
.cl-controls{display:flex; justify-content:flex-end; padding:8px 0}
.sr-only{position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap}
</style>
</head>
<body onload="window.scrollTo(0,0)">
  <canvas id="pixelClouds" aria-hidden="true"></canvas>
  <canvas id="shimmerFX" aria-hidden="true"></canvas>

<script>
// (disabled old background script to avoid conflicts with new theme-specific engine)
</script>
  <div class="wrap">
    <header>
      <nav class="left-nav">
        <a href="#top">home</a>
        <a href="#work">projects</a>
      </nav>

      <div class="brand" id="logoEgg" role="button" tabindex="0" aria-label="play a secret audio">
        <img src="officialogo.png" alt="obviouslypurple logo" class="brand-logo" />
      </div>

      <div class="right-socials">
        <button class="icon theme-toggle" aria-label="toggle theme" title="toggle theme">🌙</button>
        <a class="icon" href="https://x.com/obviouslypurple" target="_blank" aria-label="x (twitter)">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2H21l-6.56 7.49L22.5 22h-6.657l-5.2-6.79L3.5 22H1l7.11-8.12L1.5 2h6.74l4.7 6.2L18.244 2Zm-2.327 18h2.19L8.173 4h-2.3l10.044 16Z"/></svg>
        </a>
        <a class="icon" href="https://www.roblox.com/users/341680229/profile" target="_blank" aria-label="roblox profile">
          <svg viewBox="0 0 100 100" aria-hidden="true"><g transform="translate(50 50) rotate(20) translate(-50 -50)"><rect x="15" y="15" width="70" height="70" fill="currentColor"/><rect x="41" y="41" width="18" height="18" fill="var(--bg)"/></g></svg>
        </a>
      </div>
    </header>

    <section class="hero" id="top">
      <div class="intro">
        <h2>i'm obviouslypurple — 22 year old roblox developer, ui + 3d artist, project manager.</h2>
        <p>i've been building games, designing worlds, and organizing projects for almost a decade now.</p>
        <button class="btn" onclick="window.open('https://x.com/obviouslypurple','_blank')">subscribe to my socials</button>
      </div>
    </section>

    <section id="work">
      <div class="tabs" role="tablist">
        <button class="tab is-active" type="button" role="tab" aria-selected="true" data-filter="all">all</button>
        <button class="tab" type="button" role="tab" aria-selected="false" data-filter="live">live experiences</button>
        <button class="tab" type="button" role="tab" aria-selected="false" data-filter="projects">projects</button>
        <button class="tab" type="button" role="tab" aria-selected="false" data-filter="other">other engagements</button>
      </div>

      <div class="grid">
        <article class="card" data-cat="live">
          <div class="shot has-img" style="background-image:url('Cooked.png')">
            <div class="labels">
              <a class="see-more pink" href="#" aria-label="explore about cooked">explore</a>
              <a class="see-more green" href="https://www.roblox.com/games/108476688850509/Cooked" target="_blank" rel="noopener" aria-label="play cooked">play</a>
            </div>
          </div>
          <div class="meta"><span>🔥 cooked!</span><span>creative lead • ui & 3d • live ops</span></div>
        </article>
        <article class="card" data-cat="projects">
          <div class="shot has-img" style="background-image:url('TheVoyage.png')">
            <div class="labels">
              <a class="see-more pink" href="#" aria-label="explore about the voyage">explore</a>
            </div>
          </div>
          <div class="meta"><span>the voyage</span><span>environment • studio build</span></div>
        </article>
        <article class="card" data-cat="other">
          <div class="shot">project screenshot</div>
          <div class="meta"><span>cooked ui</span><span>graphic design • ui systems</span></div>
        </article>
      </div>

      <div style="margin-top:18px; text-align:center">
        <a class="btn" href="#work" id="view-all">view all projects</a>
      </div>
    </section>

    <footer id="contact">
      <div>contact me:</div>
      <div class="footer-socials">
        <a class="icon" href="https://x.com/obviouslypurple" target="_blank" aria-label="x (twitter)">
          <svg viewBox="0 0 24 24"><path d="M18.244 2H21l-6.56 7.49L22.5 22h-6.657l-5.2-6.79L3.5 22H1l7.11-8.12L1.5 2h6.74l4.7 6.2L18.244 2Zm-2.327 18h2.19L8.173 4h-2.3l10.044 16Z"/></svg>
        </a>
        <a class="icon" href="https://www.roblox.com/users/341680229/profile" target="_blank" aria-label="roblox profile">
          <svg viewBox="0 0 100 100" aria-hidden="true"><g transform="translate(50 50) rotate(20) translate(-50 -50)"><rect x="15" y="15" width="70" height="70" fill="currentColor"/><rect x="41" y="41" width="18" height="18" fill="var(--bg)"/></g></svg>
        </a>
        <span style="font-size:12px; color:var(--muted);">discord: @obviouslypurple</span>
      </div>
      <p style="margin-top:10px">© 2025 team op • <a href="#" id="open-changelog" class="footer-link">change logs</a></p>
    </footer>

    <!-- changelog modal -->
    <div id="changelogModal" class="cl-modal" aria-hidden="true" role="dialog" aria-labelledby="cl-title">
      <div class="cl-backdrop" data-close></div>
      <div class="cl-panel" role="document">
        <header class="cl-header">
          <h3 id="cl-title">change logs</h3>
          <button class="cl-close" aria-label="close changelog" data-close>✕</button>
        </header>
        <div class="cl-content">
          <div class="cl-controls">
            <label>
              <span class="sr-only">filter</span>
              <select id="cl-filter">
                <option value="all">all</option>
                <option value="2025" selected>2025</option>
              </select>
            </label>
          </div>
          <ol id="cl-list" class="cl-list"></ol>
        </div>
      </div>
    </div>
  </div>


  <!-- easter egg audio -->
  <audio id="egg-audio" src="logoeasteregg.mp3" preload="none"></audio>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const CHANGELOG = [
    {date:'2025-08-27', title:'Themes & FX', items:[
      'LIGHT: moving pixelated light-pink “minecraft” clouds + subtle background glitches',
      'DARK: static pixelated clouds + vintage TV static/glitch overlay',
      'Logo: secret galaxy theme (purple/blue nebula, stars, orange glitches, shimmer) when audio plays'
    ]},

    {date:'2025-08-27', title:'Pixel clouds', items:[
      'Restored subtle pixelated pink clouds background with gentle movement',
      'Dark mode-aware coloring and performance-friendly rendering']},

    {date:'2025-08-27', title:'Easter egg', items:[
      'Added secret logo audio playback (logoeasteregg.mp3)']},
    {date:'2025-08-27', title:'UI wording', items:[
      'Changed project labels to say “explore” instead of “view project / see more”']},
    {date:'2025-08-27', title:'Highlights UX', items:[
      'Added tap-to-reveal labels on mobile; kept hover on desktop',
      'Made labels clickable and positioned left/right',
      'Removed “play” label from The Voyage']},
    {date:'2025-08-27', title:'Tabs + Filtering', items:[
      'Tabs now filter projects and added an “all” tab by default']},
    {date:'2025-08-27', title:'Media updates', items:[
      'Hooked up Cooked.png and TheVoyage.png for highlight cards']}
  ];

  const modal = document.getElementById('changelogModal');
  const openBtn = document.getElementById('open-changelog');
  const list = document.getElementById('cl-list');
  const filterSel = document.getElementById('cl-filter');

  function open(){ modal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
  function close(){ modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
  function yearOf(d){ return new Date(d).getFullYear().toString(); }
  function render(){
    const y = filterSel.value;
    list.innerHTML = '';
    CHANGELOG
      .filter(e => y==='all' || yearOf(e.date)===y)
      .forEach(e=>{
        const li = document.createElement('li');
        li.className = 'cl-item';
        li.innerHTML = `<time datetime="${e.date}">${e.date}</time><h4>${e.title}</h4><ul>${e.items.map(it=>`<li>${it}</li>`).join('')}</ul>`;
        list.appendChild(li);
      });
  }

  if(openBtn){ openBtn.addEventListener('click', (e)=>{ e.preventDefault(); render(); open(); }); }
  modal?.querySelectorAll('[data-close]').forEach(el=> el.addEventListener('click', close));
  filterSel?.addEventListener('change', render);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && modal.getAttribute('aria-hidden')==='false') close(); });
});
</script>
<script>
// tabs filter (all/live/projects/other)
(function(){
  const tabs = document.querySelectorAll('.tabs .tab');
  const cards = document.querySelectorAll('.grid .card');
  function apply(filter){
    tabs.forEach(t=>{
      const active = t.dataset.filter===filter;
      t.classList.toggle('is-active', active);
      t.setAttribute('aria-selected', String(active));
    });
    cards.forEach(c=>{ c.style.display = (filter==='all' || c.dataset.cat===filter) ? '' : 'none'; });
  }
  const initial = document.querySelector('.tabs .tab.is-active')?.dataset.filter || 'all';
  apply(initial);
  tabs.forEach(t=>{
    t.addEventListener('click', ()=>apply(t.dataset.filter));
    t.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); apply(t.dataset.filter);} });
  });
  document.getElementById('view-all')?.addEventListener('click', (e)=>{ apply('all'); });
})();
</script>
<script>
// logo easter egg — click the logo to play/pause audio
(function(){
  const logo = document.getElementById('logoEgg');
  const audio = document.getElementById('egg-audio');
  if(!logo || !audio) return;
  audio.volume = 0.6; // gentle volume
  function toggle(){
    if(audio.paused){
      audio.currentTime = 0;
      const p = audio.play();
      if(p && typeof p.then === 'function'){ p.catch(()=>{}); }
      logo.classList.add('egg-playing');
    }else{
      audio.pause();
      logo.classList.remove('egg-playing');
    }
  }
  logo.addEventListener('click', toggle);
  logo.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle(); } });
})();
</script>
<script>
// Theme toggle: set and remember dark/light
(function(){
  const root = document.documentElement;
  const btn = document.querySelector('.theme-toggle');
  const saved = localStorage.getItem('theme');
  const sysDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  root.setAttribute('data-theme', saved || (sysDark ? 'dark' : 'light'));
  btn?.addEventListener('click', ()=>{
    const next = root.getAttribute('data-theme')==='dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    document.dispatchEvent(new CustomEvent('theme:changed', {detail:{mode:next}}));
  });
})();
</script>
<script>
// Pixel background engine
// LIGHT: moving light-pink "minecraft" clouds + subtle glitches
// DARK:  static light-pink "minecraft" clouds + vintage TV static + occasional glitches
(function(){
  if(window.__pxbg) return; window.__pxbg = true;
  const cvs = document.getElementById('pixelClouds'); if(!cvs) return;
  const ctx = cvs.getContext('2d');
  let W=0,H=0, DPR=Math.max(1, Math.min(2, window.devicePixelRatio||1));
  const SCALE = 2; let last=0;
  const isDark = ()=> document.documentElement.getAttribute('data-theme')==='dark' || window.matchMedia('(prefers-color-scheme: dark)').matches;

  // Cloud field (shared by both themes)
  let clouds=[];
  function seedClouds(){
    const n=Math.max(18, Math.min(42, Math.round((W*H)/95000)));
    clouds=Array.from({length:n}, ()=>({
      x:Math.random()*W, y:Math.random()*H,
      sx:18+Math.random()*34, sy:12+Math.random()*22,
      dx:(Math.random()*0.05+0.02)*(Math.random()>0.5?1:-1),
      dy:(Math.random()*0.02-0.01),
      a:Math.random()*Math.PI*2
    }));
  }
  function drawClouds({moving}){
    const col = 'rgba(255,216,234,' + (isDark()? '0.22' : '0.62') + ')';
    for(const c of clouds){
      if(moving){
        c.a += 0.12; const wobX=Math.cos(c.a*0.02)*0.09, wobY=Math.sin(c.a*0.02)*0.045;
        c.x += (c.dx + wobX); c.y += (c.dy + wobY);
        const pad=160; if(c.x<-pad) c.x=W+pad; if(c.x>W+pad) c.x=-pad; if(c.y<-pad) c.y=H+pad; if(c.y>H+pad) c.y=-pad;
      }
      ctx.save(); ctx.translate(c.x/SCALE, c.y/SCALE); ctx.fillStyle=col;
      const blocks=14; for(let i=0;i<blocks;i++){
        ctx.globalAlpha=(isDark()?0.5:0.7) - i*(0.5/blocks);
        const step=(i%3===0)?8:4; const ox=(Math.random()*2-1)*c.sx; const oy=(Math.random()*2-1)*c.sy;
        const w=step; const h=(i%4===0)? step+4:step;
        ctx.fillRect(Math.round(ox), Math.round(oy), w, h);
      }
      ctx.restore(); ctx.globalAlpha=1;
    }
  }

  // LIGHT: gentle background glitches
  function drawLightGlitches(){
    if(Math.random()<0.03){
      const y=(Math.random()*H)|0; const h=3+((Math.random()*8)|0);
      ctx.save(); ctx.globalAlpha=0.06; ctx.fillStyle='rgba(255,190,220,1)'; ctx.fillRect(0,y,W,h); ctx.restore();
      ctx.save(); ctx.globalAlpha=0.04; ctx.fillStyle='rgba(200,150,255,1)'; ctx.fillRect(0,y+1,W,h-1); ctx.restore();
    }
  }

  // DARK: static TV + occasional glitch bands
  let glitchTimer=0;
  function drawStaticTV(){
    const cols = Math.ceil(W/(SCALE*6));
    const rows = Math.ceil(H/(SCALE*6));
    for(let y=0;y<rows;y++){
      for(let x=0;x<cols;x++){
        const n=(Math.random()*20)|0; const base=150+(n%10);
        ctx.fillStyle=`rgba(255,${base},${205-n},0.08)`; ctx.fillRect(x*6,y*6,6,6);
      }
    }
    ctx.fillStyle='rgba(255,155,200,0.05)';
    for(let y=0;y< H/(SCALE*2); y+=2){ ctx.fillRect(0, y*2, W, 1); }
  }
  function drawDarkGlitch(dt){
    glitchTimer -= dt; if(glitchTimer>0) return;
    glitchTimer = 800 + Math.random()*1200;
    const bands = 1 + (Math.random()*3)|0;
    for(let b=0;b<bands;b++){
      const y=(Math.random()*H)|0, h=6+((Math.random()*18)|0), shift=(Math.random()>0.5?1:-1)*(4+((Math.random()*20)|0));
      ctx.save(); ctx.globalAlpha=0.14; ctx.fillStyle='rgba(180,120,220,0.25)'; ctx.fillRect(shift,y,W,h); ctx.restore();
      ctx.save(); ctx.globalAlpha=0.08; ctx.fillStyle='rgba(120,180,255,0.35)'; ctx.fillRect(shift*0.6,y+2,W,h-2); ctx.fillStyle='rgba(255,120,200,0.35)'; ctx.fillRect(-shift*0.4,y+1,W,h-1); ctx.restore();
    }
  }

  function resize(){
    W=window.innerWidth; H=window.innerHeight;
    cvs.style.width=W+'px'; cvs.style.height=H+'px';
    cvs.width=Math.ceil(W/SCALE)*DPR; cvs.height=Math.ceil(H/SCALE)*DPR;
    ctx.setTransform(DPR,0,0,DPR,0,0); ctx.imageSmoothingEnabled=false;
    seedClouds();
  }

  function render(t){
    const dt=Math.min(33,(t-last)||16); last=t;
    ctx.clearRect(0,0,cvs.width, cvs.height);
    if(isDark()){
      drawClouds({moving:false}); // static clouds
      drawStaticTV();
      drawDarkGlitch(dt);
    } else {
      drawClouds({moving:true});
      drawLightGlitches();
    }
    requestAnimationFrame(render);
  }

  window.addEventListener('resize', resize, {passive:true});
  resize(); requestAnimationFrame(render);
})();
</script>
<script>
// Shimmer/Galaxy FX overlay on #shimmerFX
// - 'shimmer-on' => gentle purple/blue shimmer (legacy)
// - 'galaxy-on'  => nebula + stars + orange glitch bands (secret theme)
(function(){
  if(window.__shimmerFX) return; window.__shimmerFX = true;
  const cvs = document.getElementById('shimmerFX'); if(!cvs) return; const ctx=cvs.getContext('2d');
  let W=0,H=0, DPR=Math.max(1, Math.min(2, window.devicePixelRatio||1));
  const SCALE=2; let t=0; let stars=[]; let glitchT=0;
  function resize(){ W=innerWidth; H=innerHeight; cvs.style.width=W+'px'; cvs.style.height=H+'px'; cvs.width=Math.ceil(W/SCALE)*DPR; cvs.height=Math.ceil(H/SCALE)*DPR; ctx.setTransform(DPR,0,0,DPR,0,0); ctx.imageSmoothingEnabled=false; seedStars(); }
  function seedStars(){ const count=Math.max(60, Math.round((W*H)/24000)); stars=Array.from({length:count}, ()=>({ x:Math.random()*W, y:Math.random()*H, tw:Math.random()*Math.PI*2, s:(Math.random()*1.5+0.5), hue: Math.random()<0.14? 'orange':'blue' })); }
  function drawNebula(){ const cols=Math.ceil(W/(SCALE*8)), rows=Math.ceil(H/(SCALE*8)); for(let yy=0;yy<rows;yy++){ for(let xx=0;xx<cols;xx++){ const wv = Math.sin((xx+yy+t)*0.12)*0.5 + Math.sin((xx*0.3 - yy*0.2 + t*0.8))*0.5; const a=0.05+(wv+1)*0.06; const r=180+Math.floor((wv+1)*40); const g=150+Math.floor((1-wv)*30); const b=250; ctx.fillStyle=`rgba(${r},${g},${b},${a})`; ctx.fillRect(xx*8, yy*8, 8, 8);} } }
  function drawStars(){ for(const s of stars){ s.tw += 0.07; const a=0.4 + (Math.sin(s.tw)*0.3+0.3); ctx.fillStyle = s.hue==='orange' ? `rgba(255,180,90,${a*0.8})` : `rgba(170,150,255,${a})`; const size=s.s; ctx.fillRect(Math.round(s.x/SCALE), Math.round(s.y/SCALE), size, size);} }
  function drawOrangeGlitch(dt){ glitchT -= dt; if(glitchT>0) return; glitchT = 1200 + Math.random()*1600; const y=(Math.random()*H)|0, h=4+((Math.random()*16)|0), shift=(Math.random()>0.5?1:-1)*(6+((Math.random()*18)|0)); ctx.save(); ctx.globalAlpha=0.16; ctx.fillStyle='rgba(255,150,60,1)'; ctx.fillRect(shift, y, W, h); ctx.restore(); ctx.save(); ctx.globalAlpha=0.1; ctx.fillStyle='rgba(120,180,255,1)'; ctx.fillRect(shift*0.5, y+2, W, h-1); ctx.restore(); }
  function drawShimmer(){ const cols=Math.ceil(W/(SCALE*8)), rows=Math.ceil(H/(SCALE*8)); for(let y=0;y<rows;y++){ for(let x=0;x<cols;x++){ const wv = Math.sin((x+y+t)*0.12)*0.5 + Math.sin((x*0.3 - y*0.2 + t*0.8))*0.5; const a = 0.06 + (wv+1)*0.05; const r = 190 + Math.floor((wv+1)*25); const g = 160 + Math.floor((1-wv)*20); const b = 255; ctx.fillStyle = `rgba(${r},${g},${b},${a})`; ctx.fillRect(x*8, y*8, 8, 8);} } ctx.globalAlpha=0.08; ctx.fillStyle='rgba(180,140,255,1)'; const off=(t*2)%120; ctx.fillRect(-W+off, 0, W/3, H); ctx.globalAlpha=1; }
  function loop(ts){ t+=0.6; ctx.clearRect(0,0,cvs.width,cvs.height); const root=document.documentElement; if(root.classList.contains('galaxy-on')){ drawNebula(); drawStars(); drawOrangeGlitch(16); } else if(root.classList.contains('shimmer-on')){ drawShimmer(); } requestAnimationFrame(loop); }
  window.addEventListener('resize', resize, {passive:true}); resize(); loop();
})();
</script>
<script>
// Bind secret galaxy theme to logo audio play/pause
(function(){
  if(window.__logoGalaxy) return; window.__logoGalaxy = true;
  const audio = document.getElementById('egg-audio');
  const logo = document.getElementById('logoEgg');
  const root = document.documentElement;
  function onPlay(){ root.classList.add('galaxy-on'); root.classList.add('shimmer-on'); }
  function onPause(){ root.classList.remove('galaxy-on'); root.classList.remove('shimmer-on'); }
  if(audio){
    audio.addEventListener('play', onPlay);
    audio.addEventListener('pause', onPause);
    audio.addEventListener('ended', onPause);
  }
  if(!audio && logo){ logo.addEventListener('click', ()=> root.classList.toggle('galaxy-on')); }
})();
</script>
</body>
</html>
